package UtilsClassTest;

import com.fasterxml.jackson.core.JsonProcessingException;
import org.junit.jupiter.api.Test;
import ro.ubb.utils.APIRequest;

import java.util.Map;

import static org.junit.jupiter.api.Assertions.*;

public class APIRequestTest {

    @Test
    public void testGetMapFromStringJSON(){
        String json = "{\"page\":1,\"results\":[{\"adult\":false,\"backdrop_path\":\"/2I5eBh98Q4aPq8WdQrHdTC8ARhY.jpg\",\"genre_ids\":[28,12,16,878],\"id\":569094,\"original_language\":\"en\",\"original_title\":\"Spider-Man: Across the Spider-Verse\",\"overview\":\"After reuniting with Gwen Stacy, Brooklynâ€™s full-time, friendly neighborhood Spider-Man is catapulted across the Multiverse, where he encounters the Spider Society, a team of Spider-People charged with protecting the Multiverseâ€™s very existence. But when the heroes clash on how to handle a new threat, Miles finds himself pitted against the other Spiders and must set out on his own to save those he loves most.\",\"popularity\":2859.047,\"poster_path\":\"/8Vt6mWEReuy4Of61Lnj5Xj704m8.jpg\",\"release_date\":\"2023-05-31\",\"title\":\"Spider-Man: Across the Spider-Verse\",\"video\":false,\"vote_average\":8.773,\"vote_count\":1162},{\"adult\":false,\"backdrop_path\":\"/T5xXoFqyc9jNXZIbH4Sw0jwWjw.jpg\",\"genre_ids\":[28,80,53,9648],\"id\":605886,\"original_language\":\"en\",\"original_title\":\"To Catch a Killer\",\"overview\":\"Baltimore. New Year's Eve. A talented but troubled police officer is recruited by the FBI's chief investigator to help profile and track down a mass murderer.\",\"popularity\":920.656,\"poster_path\":\"/mFp3l4lZg1NSEsyxKrdi0rNK8r1.jpg\",\"release_date\":\"2023-04-06\",\"title\":\"To Catch a Killer\",\"video\":false,\"vote_average\":6.911,\"vote_count\":258},{\"adult\":false,\"backdrop_path\":\"/zh614Bixv2ePaHK8gzcUpUmcvYv.jpg\",\"genre_ids\":[53,28,80],\"id\":1102776,\"original_language\":\"fr\",\"original_title\":\"AKA\",\"overview\":\"A steely special ops agent finds his morality put to the test when he infiltrates a crime syndicate and unexpectedly bonds with the boss' young son.\",\"popularity\":329.949,\"poster_path\":\"/3BSxAjiporlwQTWzaHZ9Yrl5C9D.jpg\",\"release_date\":\"2023-04-28\",\"title\":\"AKA\",\"video\":false,\"vote_average\":7.054,\"vote_count\":363},{\"adult\":false,\"backdrop_path\":\"/5gPQKfFJnl8d1edbkOzKONo4mnr.jpg\",\"genre_ids\":[878,12,28],\"id\":76600,\"original_language\":\"en\",\"original_title\":\"Avatar: The Way of Water\",\"overview\":\"Set more than a decade after the events of the first film, learn the story of the Sully family (Jake, Neytiri, and their kids), the trouble that follows them, the lengths they go to keep each other safe, the battles they fight to stay alive, and the tragedies they endure.\",\"popularity\":1344.884,\"poster_path\":\"/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg\",\"release_date\":\"2022-12-14\",\"title\":\"Avatar: The Way of Water\",\"video\":false,\"vote_average\":7.7,\"vote_count\":8497},{\"adult\":false,\"backdrop_path\":\"/xnAi4BRoO3ZQ3wwxGn6UNoxQzDq.jpg\",\"genre_ids\":[80,28],\"id\":823999,\"original_language\":\"it\",\"original_title\":\"Diabolik - Ginko all'attacco!\",\"overview\":\"Diabolik nearly gets caught in Inspector Ginko's latest trap, leaving his partner in crime Eva Kant behind in the escape. Furious, Eva offers Ginko her help in capturing the King of Terror, but the former has to face the return of an old flame of his.\",\"popularity\":113.626,\"poster_path\":\"/8QVbWBv94BAT9u1q9uJccwOxMzt.jpg\",\"release_date\":\"2022-11-17\",\"title\":\"Diabolik - Ginko Attacks\",\"video\":false,\"vote_average\":5.959,\"vote_count\":257},{\"adult\":false,\"backdrop_path\":\"/m8JTwHFwX7I7JY5fPe4SjqejWag.jpg\",\"genre_ids\":[28,12,878],\"id\":640146,\"original_language\":\"en\",\"original_title\":\"Ant-Man and the Wasp: Quantumania\",\"overview\":\"Super-Hero partners Scott Lang and Hope van Dyne, along with with Hope's parents Janet van Dyne and Hank Pym, and Scott's daughter Cassie Lang, find themselves exploring the Quantum Realm, interacting with strange new creatures and embarking on an adventure that will push them beyond the limits of what they thought possible.\",\"popularity\":1167.79,\"poster_path\":\"/qnqGbB22YJ7dSs4o6M7exTpNxPz.jpg\",\"release_date\":\"2023-02-15\",\"title\":\"Ant-Man and the Wasp: Quantumania\",\"video\":false,\"vote_average\":6.481,\"vote_count\":3229},{\"adult\":false,\"backdrop_path\":\"/tFaC1Fb1sv1dALB0i9Avi76MHmn.jpg\",\"genre_ids\":[10751,28,12],\"id\":946310,\"original_language\":\"nl\",\"original_title\":\"De Piraten van Hiernaast II: De Ninja's van de Overkant\",\"overview\":\"The pirates feel right at home in Sandborough, but the atmosphere cools right down when the ninjas come to live in the street. After all, pirates and ninjas are sworn enemies!  While pirate captain Hector Blunderbuss struggles to get rid of his new neighbours, son Billy and ninja daughter Yuka become friends. The pirates challenge the ninjas to the ultimate battle at the village's annual hexathlon. Who will win the match? Ninjas are faster and more agile of course, but pirates are the best cheats in all of the seven seas...\",\"popularity\":231.401,\"poster_path\":\"/uDsvma9dAwnDPVuCFi99YpWvBk0.jpg\",\"release_date\":\"2022-04-20\",\"title\":\"Pirates Down the Street II: The Ninjas from Across\",\"video\":false,\"vote_average\":6.772,\"vote_count\":116},{\"adult\":false,\"backdrop_path\":\"/r2tDSD6kcHflPzsGepl8aTPTWxy.jpg\",\"genre_ids\":[28,35,80],\"id\":879444,\"original_language\":\"en\",\"original_title\":\"Accident Man: Hitman's Holiday\",\"overview\":\"The Accident Man is back, and this time he must best the top assassins in the world to protect the ungrateful son of a mafia boss, save the life of his only friend and rekindle his relationship with his maniacal father figure.\",\"popularity\":1117.559,\"poster_path\":\"/npW9nfL7F3ZVpaCpabqo98KTLw6.jpg\",\"release_date\":\"2022-10-14\",\"title\":\"Accident Man: Hitman's Holiday\",\"video\":false,\"vote_average\":6.639,\"vote_count\":79},{\"adult\":false,\"backdrop_path\":\"/9SICXMeX0v0gr5czpoRO5I0U7M9.jpg\",\"genre_ids\":[10751,16,14],\"id\":1118203,\"original_language\":\"en\",\"original_title\":\"The Swan Princess: A Fairytale Is Born\",\"overview\":\"Before becoming queen, Uberta lived a humble life with her husband Maximillian when she is suddenly thrust into royalty. Through triumph and tragedy, she learns the lessons needed to become a beloved Queen, all while raising the next generation of rulers. When it's time for Uberta to pass the royal scepter to Odette and Derek, rival Queen Wixom has plans of her own to ruin the kingdom's greatest coronation.\",\"popularity\":429.632,\"poster_path\":\"/2axXVpi3dKfESWzgncbakLB7o7f.jpg\",\"release_date\":\"2023-05-23\",\"title\":\"The Swan Princess: A Fairytale Is Born\",\"video\":false,\"vote_average\":7.056,\"vote_count\":18},{\"adult\":false,\"backdrop_path\":\"/a5alro35e0XUa21Hb9Wlci67U73.jpg\",\"genre_ids\":[16,28,14,878],\"id\":893712,\"original_language\":\"ja\",\"original_title\":\"ĺŠ‡ĺ ´ç‰� ă‚˝ă�Ľă�‰ă‚˘ă�Ľă��ă�»ă‚Şă�łă�©ă‚¤ă�ł -ă�—ă�\u00ADă‚°ă�¬ă��ă‚·ă�–- ĺ†Ąă�Ťĺ¤•é—‡ă�®ă‚ąă‚±ă�«ă�„ă‚©\",\"overview\":\"Over a month has passed since 10,000 users were trapped inside the \\\"Sword Art Online\\\" world. Asuna, who cleared the first floor of the floating iron castle of Aincrad, joined up with Kirito and continued her journey to reach the top floor. With the support of female Information Broker Argo, clearing the floors seemed to be progressing smoothly, but conflict erupts between two major guilds who should be working together â€“ the top player groups ALS (the Aincrad Liberation Squad) and DKB (the Dragon Knights Brigade). And meanwhile, behind the scenes exists a mysterious figure pulling the stringsâ€¦\",\"popularity\":603.684,\"poster_path\":\"/2lEyzOq6ILNgBpLLpTRckQhbNNt.jpg\",\"release_date\":\"2022-10-22\",\"title\":\"Sword Art Online the Movie -Progressive- Scherzo of Deep Night\",\"video\":false,\"vote_average\":7.743,\"vote_count\":70},{\"adult\":false,\"backdrop_path\":\"/rtawaC6L7TFqA2LGxwicubixM4A.jpg\",\"genre_ids\":[35,10749],\"id\":1098239,\"original_language\":\"es\",\"original_title\":\"Tangos, tequilas, y algunas mentiras\",\"overview\":\"Lu has a perfect life. Or so she pretends to have. She meets the handsome, short-tempered Argentinian, Diego, who is on a visit to Mexico, and she is confident to get him head over heels in love with her. In order to win a wager with her friends, her life will take a turn when she does the impossible to win him over, including taking a trip to Argentina to look for him.\",\"popularity\":31.629,\"poster_path\":\"/o9S6GW9MGyQZpRpPj65k0RIqYNL.jpg\",\"release_date\":\"2023-03-09\",\"title\":\"Tango, Tequila and Some Lies\",\"video\":false,\"vote_average\":7.276,\"vote_count\":67},{\"adult\":false,\"backdrop_path\":\"/s5XlVKEoboLPgIqaEzCwoCiRn40.jpg\",\"genre_ids\":[18,10749],\"id\":962682,\"original_language\":\"pt\",\"original_title\":\"Um Ano InesquecĂ\u00ADvel: VerĂŁo\",\"overview\":\"In order to study fashion in so-desired Paris, a young country girl who hates Carnival travels to Rio de Janeiro to try to get support from the most famous designer in Brazil. Set on sneaking into the sewing team of one of the biggest samba schools, she will discover that Carnival only lasts for a week, but a love story can change her entire life.\",\"popularity\":200.612,\"poster_path\":\"/jNO8smUkyNbL2t6HU6EBnJCSf6r.jpg\",\"release_date\":\"2023-06-01\",\"title\":\"An Unforgettable Year: Summer\",\"video\":false,\"vote_average\":5.429,\"vote_count\":7},{\"adult\":false,\"backdrop_path\":null,\"genre_ids\":[18,10402],\"id\":461191,\"original_language\":\"en\",\"original_title\":\"A\",\"overview\":\"A young alcoholic ambient musician locks himself in his apartment on a dangerous seven day bender as he attempts to finish his upcoming album.\",\"popularity\":2.915,\"poster_path\":\"/4uOKZzRB615cIxcVi31pcsdFtSS.jpg\",\"release_date\":\"2017-09-13\",\"title\":\"A\",\"video\":false,\"vote_average\":7.196,\"vote_count\":23},{\"adult\":false,\"backdrop_path\":\"/tU3mnpFLOAp2Ia6vHvGIw8ewJQb.jpg\",\"genre_ids\":[10402],\"id\":1041513,\"original_language\":\"en\",\"original_title\":\"Encanto at the Hollywood Bowl\",\"overview\":\"A taped performance of the Encanto Live-to-Film Concert Experience at the Hollywood Bowl. The original cast puts on a miracle of a concert as they sing the favorite songs, accompanied by a full orchestra and 50 person ensemble, and the Hollywood Bowl transforms into Casita!\",\"popularity\":219.992,\"poster_path\":\"/sa3Ku5yNVjp8NloWxJoI9dQjvOi.jpg\",\"release_date\":\"2022-12-28\",\"title\":\"Encanto at the Hollywood Bowl\",\"video\":false,\"vote_average\":7.097,\"vote_count\":139},{\"adult\":false,\"backdrop_path\":\"/wxr4Z6E83h14CogsZOzDm1vuDX3.jpg\",\"genre_ids\":[878,28,12],\"id\":91314,\"original_language\":\"en\",\"original_title\":\"Transformers: Age of Extinction\",\"overview\":\"As humanity picks up the pieces, following the conclusion of \\\"Transformers: Dark of the Moon,\\\" Autobots and Decepticons have all but vanished from the face of the planet. However, a group of powerful, ingenious businessman and scientists attempt to learn from past Transformer incursions and push the boundaries of technology beyond what they can control - all while an ancient, powerful Transformer menace sets Earth in his cross-hairs.\",\"popularity\":424.422,\"poster_path\":\"/jyzrfx2WaeY60kYZpPYepSjGz4S.jpg\",\"release_date\":\"2014-06-25\",\"title\":\"Transformers: Age of Extinction\",\"video\":false,\"vote_average\":5.913,\"vote_count\":7360},{\"adult\":false,\"backdrop_path\":\"/n9wlAmb4vEgZHghtqsXXj95PocJ.jpg\",\"genre_ids\":[35,12,10751],\"id\":643215,\"original_language\":\"fr\",\"original_title\":\"AstĂ©rix \\u0026 ObĂ©lix : L'Empire du Milieu\",\"overview\":\"Gallic heroes and forever friends Asterix and Obelix journey to China to help Princess Sa See save the Empress and her land from a nefarious prince.\",\"popularity\":126.713,\"poster_path\":\"/ifOqT5SmA4ANjmyEacLw3KAFKUd.jpg\",\"release_date\":\"2023-02-01\",\"title\":\"Asterix \\u0026 Obelix: The Middle Kingdom\",\"video\":false,\"vote_average\":4.894,\"vote_count\":438},{\"adult\":false,\"backdrop_path\":\"/daeD5T4MxFk5MppZlaNZoaK6lE9.jpg\",\"genre_ids\":[16,14],\"id\":811948,\"original_language\":\"ja\",\"original_title\":\"é¬Ľć»…ă�®ĺ�� ćź±ĺ��äĽšč\u00AD°ă�»čť¶ĺ±‹ć•·ç·¨\",\"overview\":\"Tanjiro and his sister Nezuko have been apprehended by the Demon Slayer Hashira, a group of extremely skilled swordfighters. Tanjiro undergoes trial for violating the Demon Slayer code, specifically smuggling Nezuko, a Demon, onto Mt. Natagumo. A recap film of Kimetsu no Yaiba, covering episodes 22-26 with some new footage and special ending credits.\",\"popularity\":200.375,\"poster_path\":\"/j1FpReEQXp8JsgNQZcfGvzeXNoI.jpg\",\"release_date\":\"2021-04-15\",\"title\":\"Demon Slayer: Kimetsu no Yaiba the Hashira Meeting Arc\",\"video\":true,\"vote_average\":7.016,\"vote_count\":129},{\"adult\":false,\"backdrop_path\":\"/ltpW5exyTdqL5twV8zRMajf1VgU.jpg\",\"genre_ids\":[99],\"id\":24791,\"original_language\":\"ja\",\"original_title\":\"A\",\"overview\":\"Roughly chronological, from 3/96 to 11/96, with a coda in spring of 1997: inside compounds of Aum Shinrikyo, a Buddhist sect led by Shoko Asahara. (Members confessed to a murderous sarin attack in the Tokyo subway in 1995.) We see what they eat, where they sleep, and how they respond to media scrutiny, on-going trials, the shrinking of their fortunes, and the criticism of society. Central focus is placed on Hiroshi Araki, a young man who finds himself elevated to chief spokesman for Aum after its leaders are arrested. Araki faces extreme hostility from the Japanese public, who find it hard to believe that most followers of the cult had no idea of the attacks and even harder to understand why these followers remain devoted to the religion, if not the violence.\",\"popularity\":1.271,\"poster_path\":\"/dBLzrfh5DtxJey1hOYZaN2drPe3.jpg\",\"release_date\":\"1998-09-09\",\"title\":\"A\",\"video\":false,\"vote_average\":6.058,\"vote_count\":26},{\"adult\":false,\"backdrop_path\":\"/ahjfjrRiWVK8ErZBd5o4AVs6mp.jpg\",\"genre_ids\":[28,53,80],\"id\":1070777,\"original_language\":\"en\",\"original_title\":\"One Day as a Lion\",\"overview\":\"Jackie Powers will stop at nothing to prevent his son from following him into a life of crime. With his mob employer in pursuit, a chance encounter at a roadside diner charts a new path.\",\"popularity\":664.335,\"poster_path\":\"/cxSKca4dNlk7O7PMiEYT203vlIw.jpg\",\"release_date\":\"2023-04-04\",\"title\":\"One Day as a Lion\",\"video\":false,\"vote_average\":5.864,\"vote_count\":22},{\"adult\":false,\"backdrop_path\":\"/bqMWZ5hB7bcI1KK2TH29odwCgWX.jpg\",\"genre_ids\":[12,14,35],\"id\":493529,\"original_language\":\"en\",\"original_title\":\"Dungeons \\u0026 Dragons: Honor Among Thieves\",\"overview\":\"A charming thief and a band of unlikely adventurers undertake an epic heist to retrieve a lost relic, but things go dangerously awry when they run afoul of the wrong people.\",\"popularity\":409.568,\"poster_path\":\"/A7AoNT06aRAc4SV89Dwxj3EYAgC.jpg\",\"release_date\":\"2023-03-23\",\"title\":\"Dungeons \\u0026 Dragons: Honor Among Thieves\",\"video\":false,\"vote_average\":7.458,\"vote_count\":1661}],\"total_pages\":500,\"total_results\":10000}";
        try {
            Map<String, Object> map = APIRequest.getMapFromStringJSON(json);
            assertEquals(map.get("page"), 1);
            assertEquals(map.get("total_pages"), 500);
            assertEquals(map.get("total_results"), 10000);
        } catch (JsonProcessingException e) {
            fail();
        }

    }
}
